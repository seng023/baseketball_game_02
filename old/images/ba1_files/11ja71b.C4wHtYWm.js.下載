import"./bygoogle.ZhFWTtz1.js";import{r as w,N as E,E as b,q as L,x as v,c as A,a as z,s as I}from"./index.HohTPN-J.js";import{o as q}from"./share-url.BxOGO2fb.js";import{p as R,h as m}from"./hue.2pwymUwZ.js";import{a2 as B}from"./reactivity.esm-bundler.2HWLMcdP.js";import"./prf-down.wEFH1xR6.js";import"./video.BphnlH4E.js";import"./11ja71b.BPCopo23.js";import"./nav.Bf8rerb0.js";import"./11ja71b.1Mbm5oiS.js";import"./searchbar.DgRYguoy.js";import"./client.CwzHqc-i.js";import"./client.DMn-QUT4.js";import"./howto.Dwx5DSdv.js";import"./client.CIcBQryr.js";import"./usePosition.EKHji2P9.js";import"./index.CffDzc1U.js";import"./scroll.BZC2afIS.js";import"./core.CMAjdS7V.js";function D(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}D.g=e}function W(e,i){if(!e)return;const t=document.getElementById(i)||document.createElement("iframe");t.id=i,t.src=e,document.body.appendChild(t)}function F(){if(!__DATA__.isBot){const{id:e,type:i}=s;w.get("/api/statistics/view",{id:e,type:i}),i=="1"?w.get("/api/statistics/detail-out-view",{id:e}):i=="5"&&R("font_detail",1,"come")}}const s=window._getDetailData(),C=B({spin:!1}),_=()=>{C.spin=!1},x=e=>{_(),e&&window.open(e,"_blank")},P=()=>{L("rbg_id_type","".concat(s.id,"_").concat(s.type),{domain:".pngtree.com",expires:1}),x("/remove-background")},H={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function j(e,i,t){if(!e||C.spin)return;const n=s.one>0||s.limitedTime,o=()=>{if(__DATA__.enterpriseStatus==1)return;const a=+s.vipType;if(!n&&a>0){const f=__DATA__.vipType<=0;if(f||!f&&a==2)return _(),$app.dialog="upgrade-premium",!0}};if(!$app.checkIsLogin()){m("down-btnnologin-"+e);return}if(e==="remove-bg"){o()||(m("detail/ai-btn-remove-bg"),P());return}switch(C.spin=!0,m(H[e]),e){case"png":case"rar":case"ppt":case"twibbon":const a=e==="png";i&&n?x(i):b.emit("_amemn8","*",{onend:_,type:s.type,btnType:e,licenseType:s.vipType||0,href:i,downUrl:i,rarName:t||"PSD",fee:s.fee&&a});break;case"edit":i&&s.editips&&confirm(s.editips)&&(i=i.replace(/\/canvas\/?\?/,"/canvas/designer.html?")),o()||x(i);break;case"freevideo":W(i,"down_ifr"),_();break;default:e==="premium"&&__DATA__.cookieLang!=="cht"?b.emit("_amemn8","plans",{onend:_,type:s.type}):x(i);break}}let $=!1;function N(e,i){if(!i||$)return;if(!$app.checkIsLogin()){m("downsizes-nologin-"+e);return}if(document.querySelector("._1rtuhfs")){$app.dialog="device-limit";return}const t=p=>{b.emit("_amemn8",p,{fee:p==="rar"?!0:void 0,onend:_,type:s.type}),m("downsizes-limit-"+e)},{vipType:n,down_count:o,enterpriseStatus:a,has_down:f}=__DATA__,{vipType:r}=s,d=o<=0,u=n==0;if(r==2&&a!=1){t("enterprise");return}if(u){t("plans");return}if([1,6,9].includes(+n)&&d){t("daily");return}if(f>200){t("max");return}const c=($toast==null?void 0:$toast.loading("Loading..."))||E,l=p=>{$=p,!p&&c()};l(!0);const y=p=>{p&&(l(!1),setTimeout(()=>{location.href=i+"&task_id="+p},100))};w.post("/api/ai-tools/img-enlarge",{id:s.id,multiple:e}).then(p=>{if(p.status==201)y(p.data.task_id);else if(p.status==200){const{task_id:S,md5:T}=p.data;h(S,T,0)}else $toast==null||$toast.error(p.info||"Error!"),l(!1)}).catch(()=>{l(!1),$toast==null||$toast.error("Error!")});function h(p,S,T){!p||T>=50||w.post("/api/ai-tools/img-enlarge-task",{id:s.id,task_id:p,md5:S,multiple:e}).then(k=>{k.status==200?y(k.data.task_id||p):setTimeout(()=>{h(p,S,++T)},5e3)}).catch(()=>{})}}v("_19z0z4b",()=>{const e={type:"",desc:""};return{loading:!1,err:"",form:{...e},errCls(i){return this.err===i?"_feqbc0":""},onSubmit(){if(this.loading)return;const i={...this.form},t=n=>{if(i[n].trim()==="")return this.err=n,!0};t("type")||t("desc")||(this.err="",this.loading=!0,w.post("/api/message/complaint",{complaint_type:i.type,content:i.desc,element_id:s.id,element_type:s.type}).then(n=>{this.loading=!1,n.rsp==200?($toast==null||$toast.success("Successful!"),this.$nextTick(()=>{$app.onDialog(""),setTimeout(()=>{this.form={...e}},300)})):$toast==null||$toast.error(n.info)}).catch(()=>{this.loading=!1,$toast==null||$toast.error("Error!")}))}}});v("_1r0qupz",e=>({tab:e.tab,prfLoading:!1,tabCls(i){return this.tab===i?"_c5516n":""},onTab(i){this.tab=i},licPrf(i){const t=this.$app;if(!t.tapLogin())return;const n=i==="enterprise",o=n?"team":"",a=s.one>0,{vipType:f,enterpriseStatus:r}=__DATA__,d=n?r!=1:f<=0;if(!a&&d)t.onDialog(n?"_5j84hy":"_1mbqn4s"),m("prfview-btn"+o);else if(!this.prfLoading){this.prfLoading=!0;const u=this._Refs.prfDown,c=()=>{this.prfLoading=!1};u.onshow({...u.getName(s.one,i),slidesdocs:!!s.slidesdocs,data:{action:"detail",id:s.id,type:s.type},resolve:c,reject:c}),m("prfdown-btn"+o)}}}));v("_1um5rr9",e=>({url:e.url,followed:e.is,loading:!1,onFollow(){const i=this.$app;!this.loading&&i.tapLogin()&&(this.loading=!0,w.post("/api/async/designer-follow",{id:e.uid}).then(t=>{this.loading=!1,t.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));v("_166ljwa",e=>{const i="_sstrbf";return{store:C,previewSpin:!1,videoSize:"",wordsExpand:e.is2xl,wordsCount:"+10",wordsFromCls:e.is2xl?"":i,showDownSizes:!1,get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(s.id,s.type),this.wordsCalc(!0),F()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=i,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,n=t&&t.parentElement;if(!n)return;n.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const n=this.$refs.wordsbtn,o=n&&n.parentElement;if(!o)return;const a=()=>{n.classList.remove("_1i3kt2s")};if(t&&e.is2xl){a();return}const f=o.children,r=f.length,d=f[r-1];if(r<=1||d&&d.offsetTop<=0)return;const u=(c,l)=>{if(this.wordsCount="+"+(r-1-l),o.insertBefore(n,c),n.offsetTop>0){const y="previousElementSibling";let h=n[y];for(;h&&h.offsetTop>0;)h=h[y];h&&u(h,l-1)}else o._btn=c,o._btni=l;a()};if(o._btn){u(o._btn,o._btni);return}for(let c=0;c<r;c++){const l=f[c];if(l.offsetTop>0){u(l,c);break}}},onDownld(t,n,o){j(t,n,o)},onDownSizes(t){this.showDownSizes=t!=null?t:!this.showDownSizes},sizesDownld(t){N(t,this.$refs.downld_png._xprops.u)},mDownld(){I(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(t=!1){if(t){const d=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(d){z.dispatch(d,"click");return}}if(this.previewSpin)return;const n=this.$refs.imgLink,o=this.$refs.image;if(!n||!o)return;const a=n.href||o.currentSrc||o.src;if(!a)return;const f=()=>{b.emit("_kuxk9d",{src:a,width:n._nw,height:n._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{m("detail-preview-image")},80),n._nw){f();return}const r=new Image;r.onload=()=>{n._nw=r.naturalWidth,n._nh=r.naturalHeight,f()},r.onabort=r.onerror=()=>{this.previewSpin=!1,$toast==null||$toast.error("Load failed!")},r.decoding="async",r.src=a},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:s.id,type:s.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:s.id,type:s.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(s.id,s.type)},urlCopying:!1,onShareUrl(){A(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const n=this.$refs.image,o=n?n.currentSrc||n.src:O(s.shareimg);q({name:t,media:o,title:s.sharetit,word:s.shareword})},how2Attri(){const t=this._Refs.howToAttribute,n=this.$refs.lionName;t.onopen({type:s.type,url:location.pathname,usrName:n&&n.textContent||""})}}});function O(e){return/^https?:\/\//.test(e)?e:"https://png.pngtree.com"+e}const M=e=>e*(96/72);v("_e05maq",e=>({text:"",pt:e.pt,effectId:e.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(M(this.pt),"px")},get fontText(){return this.text||e.p},ptCls(i){return this.pt===i?"_4x0icu":"_1t7gxnv"},ptClick(i){this.pt=i},effectCls(i){return this.effectId===i?"_1abob5y":"_oqy7bn"},effectClick(i){this.effectId=i},"on:mounted"(){G(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const t=this.fontText.trim();if(!t)return;this.loading=!0;const n=()=>{this.loading=!1},o=this.$refs.spanTxt,a=o&&o.parentElement;if(!a)return;const f=this.$refs.canvas,r=getComputedStyle(o);b.emit("_h3jjzr",{styles:{left:o.offsetLeft,top:o.offsetTop+1.25,fontFamily:r.fontFamily,fontSize:parseInt(r.fontSize),fontWeight:r.fontWeight,fontStyle:r.fontStyle},effectId:this.effectId,text:t,textWidth:o.offsetWidth,canvasWidth:a.offsetWidth,canvasHeight:a.offsetHeight,cid:f.id,onok:n,onerr(){n(),$toast==null||$toast.error("Error!")}})}}}));function G(){const e=document.querySelector("style[data-font-style]");if(e&&e.sheet){const i=e.sheet.cssRules,t=i.length;for(let n=0;n<t;n++)V(i[n].cssText);e.parentElement.removeChild(e)}}let g;function V(e){g||(g=document.createElement("style"),document.head.appendChild(g),g.appendChild(document.createTextNode(""))),g.sheet&&g.sheet.insertRule(e,g.sheet.cssRules.length)}export{D as __vite_legacy_guard};
